settings:
  environ:
    working_directory: .
    temporary_directory: ''
    output_directory: ''
    custom:
      Baywatch:
        name: 'Poly(A) tail length shift analysis'
        description: |
            This pipeline takes the output file tails/filtered_tails.tsv generated by pipeline-polya-ng (which uses nanopolish) from multiple control and treated samples and performs analysis on shifts in poly(A) tail lengths.
            The differences in tail length are analysed on the global level and transcript level using the Mannâ€“Whitney U test.
        fields:
        - label: Minimum reads per transcript
          description: Minimum reads per transcript
          path: workflow.data.min_reads_per_transcript.path
          fieldType: number
          value: 10
        - label: Generate per-transcript plots
          description: Generate per-transcript plots
          path: workflow.data.per_transcript_plots.path
          fieldType: boolean
          value: true
        - label: Threads
          description: Threads
          path: workflow.data.threads.path
          fieldType: number
          value: 50
workflow:
  data:
    KEYS_control_tails:
    - wt_1
    - wt_2
    control_tails:
    - class: File
      path: ''
    - class: File
      path: ''
    KEYS_treated_tails:
    - mut_1
    - mut_2
    treated_tails:
    - class: File
      path: ''
    - class: File
      path: ''
    min_reads_per_transcript: 10
    per_transcript_plots: true
    threads: 50
  steps:
  - Process:
      name: 'Poly(A) tail length shift analysis'
      HostSNK:
        target: all
        cores: 5
        location:
          class: Directory
          path: .
        config_template:
          class: File
          path: config.yml
        inputs:
        - path: data.control_tails
          confpath: control_tails
          names: data.KEYS_control_tails
          remap: samples
        - path: data.treated_tails
          confpath: treated_tails
          names: data.KEYS_treated_tails
          remap: samples
        - path: data.min_reads_per_transcript
          confpath: min_reads_per_transcript
        - path: data.per_transcript_plots
          confpath: per_transcript_plots
        - path: data.threads
          confpath: threads
